"""Integration tests for REST media_file endpoint (auto-generated).

DO NOT EDIT THIS FILE. All changes must be made in the generator.
"""

from __future__ import annotations

import time
import uuid

import httpx
import pytest


class TestMediafileHardwareDependent:
    """Tests for media_file — requires hardware for full CRUD."""

    def test_list_media_files(self, authenticated_client):
        """Verify listing media_files returns 200 or 400 (needs hardware)."""
        resp = authenticated_client.client.get(
            f"/api/s/{authenticated_client.site}/rest/mediafile",
            headers=authenticated_client._headers(),
        )
        # Without hardware: 400 (InvalidObject/needs device) or 404 (needs
        # device _id suffix, e.g. rest/device) are expected.
        # 200 means hardware exists — also fine.
        assert resp.status_code in (200, 400, 404), (
            f"Unexpected status {resp.status_code} from rest/mediafile"
        )
        if resp.status_code == 200:
            data = resp.json()
            if isinstance(data, dict) and "data" in data:
                assert isinstance(data["data"], list)

