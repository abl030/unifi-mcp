"""Integration tests for global endpoints (auto-generated).

DO NOT EDIT THIS FILE. All changes must be made in the generator.
"""

from __future__ import annotations

import httpx
import pytest

{% for tool in global_tools %}
{% if not tool.skip_test %}

class TestGlobal{{ tool.name | title | replace('_', '') }}:
    """Tests for the global {{ tool.name }} endpoint."""

{% if not tool.auth %}
    def test_{{ tool.name }}_no_auth(self, controller_url):
        """Verify {{ tool.name }} endpoint works without authentication."""
        with httpx.Client(verify=False, timeout=10.0) as client:
            resp = client.{{ tool.method | lower }}(f"{controller_url}{{ tool.path }}")
            assert resp.status_code == 200
            data = resp.json()
            assert data is not None
{% else %}
    def test_{{ tool.name }}(self, authenticated_client):
        """Verify {{ tool.name }} endpoint returns valid data."""
        data = authenticated_client.global_get("{{ tool.path }}")
        assert data is not None
{% endif %}

{% endif %}
{% endfor %}
